{{#partial "headcode" }}
{{/partial}}

{{#partial "footercode" }}
{{/partial}}

{{#partial "content" }}
<div class="container min-height-container">
    <div class="form-group {{#if successMsg}}has-error{{/if}}">
        {{#if successMsg}}<span class="help-block dlxs-validation-error">{{successMsg}}</span>{{/if}}
    </div>
    <div class="row">
        <div class="col-xs-12">
            <ol class="breadcrumb">
                <li>Admin</li>
                <li><a href="{{leadUrl}}">Leads</a></li>
                <li class="active">Lead Details</li>
            </ol>
            <form action="{{formPostUrl}}" method="post">
                <input type="hidden" name="{{csrfParameterName}}" value="{{csrfToken}}" />
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">Lead Details</h3>
                    </div>
                    <div class="panel-body">
                        <input type="hidden" name="id" value="{{lead.id}}" />
                        <div class="form-group {{#if nameError}}has-error{{/if}}">
                            <label for="name">{{#if nameError}}<i class="fa fa-times-circle-o"></i>{{/if}} Name </label>
                            {{#if nameError}}<span class="help-block dlxs-validation-error">({{nameError}})</span>{{/if}}
                            <input name="name" value="{{lead.name}}" type="text" class="form-control" placeholder="Name">
                        </div>

                        <div class="form-group">
                            <script type="text/javascript">
                            
                                function add() {
                                    //Create an input type dynamically.
                                    var div = document.createElement("div");
                                    var element = document.createElement("input");
                                    var button = document.createElement("button");

                                    button.setAttribute("type", "button");
                                    button.setAttribute("onclick", "remove()");
                                    button.innerText = "Remove";

                                    //Assign different attributes to the element.
                                    element.setAttribute("name", "blocks");
                                    element.setAttribute("style", "width:90%;display:inline");
                                    element.setAttribute("type", "text");
                                    element.setAttribute("class", "form-control");	
                                    element.setAttribute("placeholder", "Block Name");


                                    var foo = document.getElementById("fooBar");

                                    //Append the element in page (in span).
                                    div.appendChild(element);
                                    div.appendChild(button);
                                    foo.appendChild(div);
                                }

                                function remove() {
                                    $(document).click(function(event) {
                                        if($(event.target).text() === "Remove") {
                                            $(event.target).parent().remove();
                                        }
                                    });
                                }
                            </script>
                            <label for="blocks">Add Blocks</label>
                            <input type="button" value="Add Block" onclick="add()"/>
                        </div>
                        <div class="form-group" id="fooBar">
                            {{#each block}}
                                <div>
                                    <label style="width:90%;display:inline" class="form-control">{{this.name}}</label>
                                </div>
                            {{/each}}
                        </div>

                        <div class="form-group {{#if address1Error}}has-error{{/if}}">
                            <label for="address1">{{#if address1Error}}<i class="fa fa-times-circle-o"></i>{{/if}} Address </label>
                            {{#if address1Error}}<span class="help-block dlxs-validation-error">({{address1Error}})</span>{{/if}}
                            <input name="address1" value="{{lead.address1}}" type="text" class="form-control" placeholder="Address">
                        </div>

                        <div class="form-group {{#if cityError}}has-error{{/if}}">
                            <label for="city">{{#if cityError}}<i class="fa fa-times-circle-o"></i>{{/if}} City </label>
                            {{#if cityError}}<span class="help-block dlxs-validation-error">({{cityError}})</span>{{/if}}
                            <input name="city" value="{{lead.city}}" type="text" class="form-control" placeholder="City">
                        </div>

                        <div class="form-group">
                            <label for="state">State</label>
                            {{#if stateError}}<span class="help-block dlxs-validation-error">({{stateError}})</span>{{/if}}
                            <select name="state" class="form-control">
                                <option value="NULL">-- Choose state --</option>
                                {{#each states}}
                                    <option {{#ifeqState lead.state this}}selected="selected"{{/ifeqState}} value="{{@key}}">{{this}}</option>
                                {{/each}}
                            </select>
                        </div>

                        <div class="form-group {{#if postalCodeError}}has-error{{/if}}">
                            <label for="postalCode">{{#if postalCodeError}}<i class="fa fa-times-circle-o"></i>{{/if}} Postal code </label>
                            {{#if postalCodeError}}<span class="help-block dlxs-validation-error">({{postalCodeError}})</span>{{/if}}
                            <input name="postalCode" value="{{lead.postalCode}}" type="text" class="form-control" placeholder="Postal code">
                        </div>

                    </div>
                    <div class="panel-footer">
                        <button type="submit" 
                                name="action" 
                                value="save" 
                                class="btn btn-success">Save changes</button>
                        <a href="{{leadUrl}}"
                                class="btn btn-default">Cancel</a>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div><!-- /container -->
{{/partial}}
{{> app/common/master }}