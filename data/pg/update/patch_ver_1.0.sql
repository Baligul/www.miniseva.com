ALTER TABLE courses ALTER COLUMN language TYPE varchar(16);
ALTER TABLE courses ALTER COLUMN language SET DEFAULT 'english';
DROP TYPE language;
ALTER TABLE exams ADD COLUMN IF NOT EXISTS exam_type varchar(16);
ALTER TABLE courses ADD COLUMN IF NOT EXISTS pe_count smallint;
ALTER TABLE courses ALTER COLUMN pe_count SET DEFAULT 0;
UPDATE courses SET pe_count = 0;
UPDATE exams SET exam_type = 'exam';
ALTER TABLE exams_statuses ALTER COLUMN status TYPE varchar(16);
DROP TYPE status;
DROP TRIGGER insert_exams_statuses_trigger ON exams_statuses;
DROP TRIGGER insert_exams_responses_trigger ON exams_responses;
DROP TRIGGER insert_exams_results_trigger ON exams_results;
DROP TRIGGER insert_mini_exams_responses_trigger ON mini_exams_responses;
DROP TRIGGER insert_qna_questions_trigger ON qna_questions;
ALTER TABLE qna_questions ALTER COLUMN associate_with TYPE varchar(16);
ALTER TABLE notes ALTER COLUMN associate_with TYPE varchar(16);
DROP TYPE rs_object;
DROP TRIGGER insert_qna_answers_trigger ON qna_answers;
DROP TRIGGER insert_notes_trigger ON notes;
ALTER TABLE colleges ALTER COLUMN state TYPE varchar(256);
DROP TYPE state;
ALTER TABLE exams ADD COLUMN IF NOT EXISTS published boolean DEFAULT false;
ALTER TABLE exams ADD COLUMN IF NOT EXISTS published_on timestamp;
SELECT setval('courses_id_seq', (SELECT MAX(id) from courses) + 1, FALSE);
SELECT setval('exams_id_seq', (SELECT MAX(id) from exams) + 1, FALSE);
ALTER TABLE courses ADD COLUMN IF NOT EXISTS published boolean DEFAULT false;
ALTER TABLE courses ADD COLUMN IF NOT EXISTS published_on timestamp;
ALTER TABLE exams_responses ADD COLUMN IF NOT EXISTS remaining_time bigint;
ALTER TABLE courses ADD COLUMN IF NOT EXISTS tbe_count smallint;
ALTER TABLE courses ALTER COLUMN tbe_count SET DEFAULT 0;
UPDATE courses SET tbe_count = 0;
ALTER TABLE exams_responses ADD COLUMN IF NOT EXISTS skipped boolean DEFAULT false;
ALTER TABLE docs_sections ADD COLUMN IF NOT EXISTS published boolean DEFAULT false;
ALTER TABLE docs_sections ADD COLUMN IF NOT EXISTS published_on timestamp;
SELECT setval('docs_sections_id_seq', (SELECT MAX(id) from docs_sections) + 1, FALSE);
SELECT setval('docs_content_id_seq', (SELECT MAX(id) from docs_content) + 1, FALSE);
SELECT setval('questions_id_seq', (SELECT MAX(id) from questions) + 1, FALSE);
SELECT setval('answers_id_seq', (SELECT MAX(id) from answers) + 1, FALSE);
ALTER TABLE courses ADD COLUMN IF NOT EXISTS sub_category_id bigint;
ALTER TABLE courses ADD COLUMN IF NOT EXISTS sort_order smallint;